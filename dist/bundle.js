/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{A:()=>Bt});var t=function(e,t,n,r,o){return r+(Math.max(Math.min(e,n),t)-t)/(n-t)*(o-r)},n=function(e,t,n){return e.position.clone().sub(t.position.clone()).length()<n},r=function(e,t,n,r){return[e[0],e[1],e[2],t[0],t[1],t[2],n[0],n[1],n[2],t[0],t[1],t[2],n[0],n[1],n[2],r[0],r[1],r[2]]},o={red:15881030,orange:16753920,white:14209233,brown:5845806,brownDark:2300175,pink:16095342,yellow:16043667,blue:6865856,lightPurple:13148872,green:65280,black:0,lightGreen:9498256,darkGreen:25600,gold:16766720},i=16776960,a={color:255,opacity:.8};const s=o;function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}var h=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"human";switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mesh=new THREE.Object3D,this.angleHairs=0,this.pilotType=t,t){case"frog":this.createFrogPilot();break;case"nouns":this.createNounsPilot();break;default:this.createHumanPilot()}},(t=[{key:"createHumanPilot",value:function(){this.mesh=new THREE.Object3D,this.angleHairs=0;var e=new THREE.BoxGeometry(15,15,15),t=new THREE.MeshPhongMaterial({color:s.brown,flatShading:!0}),n=new THREE.Mesh(e,t);n.position.set(2,-12,0),this.mesh.add(n);var r=new THREE.BoxGeometry(10,10,10),o=new THREE.MeshLambertMaterial({color:s.pink}),i=new THREE.Mesh(r,o);this.mesh.add(i);var a=new THREE.BoxGeometry(4,4,4),c=new THREE.MeshLambertMaterial({color:s.brown}),l=new THREE.Mesh(a,c);l.geometry.applyMatrix4((new THREE.Matrix4).makeTranslation(0,2,0));var u=new THREE.Object3D;this.hairsTop=new THREE.Object3D;for(var h=0;h<12;h++){var p=l.clone(),d=h%3,f=Math.floor(h/3);p.position.set(4*f-4,0,4*d-4),p.geometry.applyMatrix4((new THREE.Matrix4).makeScale(1,1,1)),this.hairsTop.add(p)}u.add(this.hairsTop);var y=new THREE.BoxGeometry(12,4,2);y.applyMatrix4((new THREE.Matrix4).makeTranslation(-6,0,0));var m=new THREE.Mesh(y,c),v=m.clone();m.position.set(8,-2,6),v.position.set(8,-2,-6),u.add(m),u.add(v);var w=new THREE.BoxGeometry(2,8,10),g=new THREE.Mesh(w,c);g.position.set(-1,-4,0),u.add(g),u.position.set(-5,5,0),this.mesh.add(u);var E=new THREE.BoxGeometry(5,5,5),b=new THREE.MeshLambertMaterial({color:s.brown}),T=new THREE.Mesh(E,b);T.position.set(6,0,3);var x=T.clone();x.position.z=-T.position.z;var S=new THREE.BoxGeometry(11,1,11),M=new THREE.Mesh(S,b);this.mesh.add(T),this.mesh.add(x),this.mesh.add(M);var L=new THREE.BoxGeometry(2,3,2),R=new THREE.Mesh(L,o);R.position.set(0,0,-6);var k=R.clone();k.position.set(0,0,6),this.mesh.add(R),this.mesh.add(k)}},{key:"createFrogPilot",value:function(){var e=this,t=new THREE.SphereGeometry(7.5,32,32);!function(e){for(var t=e.attributes.position.array,n=0;n<t.length;n+=3){var r=.2*(Math.random()-.5);t[n]+=r,t[n+1]+=r,t[n+2]+=r}e.attributes.position.needsUpdate=!0,e.computeVertexNormals()}(t);var n=new THREE.MeshPhongMaterial({color:s.green,flatShading:!1,shininess:30}),r=new THREE.Mesh(t,n);this.mesh.add(r);var o=new THREE.SphereGeometry(2,32,32),i=new THREE.MeshPhongMaterial({color:s.white,flatShading:!1,shininess:100}),a=new THREE.Mesh(o,i);a.position.set(3,4,4),this.mesh.add(a);var c=a.clone();c.position.set(3,4,-4),this.mesh.add(c);var l=new THREE.SphereGeometry(1,32,32),u=new THREE.MeshPhongMaterial({color:s.black,flatShading:!1,shininess:100}),h=new THREE.Mesh(l,u);h.position.set(4,4,4),this.mesh.add(h);var p=h.clone();p.position.set(4,4,-4),this.mesh.add(p);var d=new THREE.Shape;d.moveTo(-3,0),d.quadraticCurveTo(0,-2,3,0);var f=new THREE.ShapeGeometry(d),y=new THREE.MeshPhongMaterial({color:s.darkGreen,side:THREE.DoubleSide}),m=new THREE.Mesh(f,y);m.position.set(3,-2,0),m.rotation.x=.5*Math.PI,this.mesh.add(m);var v=new THREE.BoxGeometry(1,.5,4),w=new THREE.MeshPhongMaterial({color:s.red,flatShading:!1}),g=new THREE.Mesh(v,w);g.position.set(3,-2,2),g.rotation.x=.25*Math.PI,this.mesh.add(g);var E=new THREE.Shape;E.moveTo(-1.5,0),E.lineTo(-.5,2),E.lineTo(.5,2),E.lineTo(1.5,0),E.lineTo(-1.5,0);var b=new THREE.ShapeGeometry(E),T=new THREE.MeshPhongMaterial({color:s.darkGreen,side:THREE.DoubleSide,flatShading:!1}),x=[{x:-3,y:-7,z:3},{x:3,y:-7,z:3},{x:-3,y:-7,z:-3},{x:3,y:-7,z:-3}];x.forEach((function(t){var n=new THREE.Mesh(b,T);n.position.set(t.x,t.y,t.z),n.rotation.x=.5*Math.PI,e.mesh.add(n)}));var S=new THREE.SphereGeometry(3,32,16,0,2*Math.PI,0,.5*Math.PI),M=new THREE.MeshPhongMaterial({color:s.lightGreen,flatShading:!1,transparent:!0,opacity:.7}),L=new THREE.Mesh(S,M);L.position.set(0,-5,6),L.rotation.x=Math.PI,this.mesh.add(L);var R=new THREE.Group,k=new THREE.CylinderGeometry(6,7,12,32),H=new THREE.MeshPhongMaterial({color:s.black,flatShading:!0}),P=new THREE.Mesh(k,H);P.position.set(0,6,0),R.add(P);var C=new THREE.TorusGeometry(6.5,1,16,100),j=new THREE.MeshPhongMaterial({color:s.gold,flatShading:!0}),O=new THREE.Mesh(C,j);O.position.set(0,1,0),O.rotation.x=.5*Math.PI,R.add(O);var G=new THREE.BoxGeometry(4,6,.1),B=new THREE.MeshPhongMaterial({color:s.white,flatShading:!0}),I=new THREE.Mesh(G,B);I.position.set(4,4,0),I.rotation.z=Math.PI/12,R.add(I);var _=new THREE.Shape;_.moveTo(0,0),_.bezierCurveTo(0,-1,-1,-1,-1,0),_.bezierCurveTo(-1,1,0,1,0,2),_.bezierCurveTo(0,1,1,1,1,0),_.bezierCurveTo(1,-1,0,-1,0,0);var D=new THREE.ShapeGeometry(_),A=new THREE.MeshPhongMaterial({color:s.red,flatShading:!0}),z=new THREE.Mesh(D,A);z.scale.set(1,1,1),z.position.set(4,4,.1),R.add(z),R.position.set(0,10,0),R.scale.set(1.5,1.5,1.5),this.mesh.add(R);var F=new THREE.Group,N=new THREE.BoxGeometry(3,1,.5),U=new THREE.MeshPhongMaterial({color:s.red,flatShading:!0}),q=new THREE.Mesh(N,U);q.position.set(-1,0,0),q.rotation.z=Math.PI/6;var W=q.clone();W.position.set(1,0,0),W.rotation.z=-Math.PI/6;var Y=new THREE.Mesh(new THREE.BoxGeometry(.5,.5,.5),U);F.add(q,W,Y),F.position.set(3,-3,6),this.mesh.add(F);for(var X=new THREE.CircleGeometry(.3,32),V=new THREE.MeshPhongMaterial({color:s.darkGreen,flatShading:!0}),K=0;K<20;K++){var J=new THREE.Mesh(X,V),$=Math.random()*Math.PI*2,Z=Math.random()*Math.PI,Q=7.5*Math.sin(Z)*Math.cos($),ee=7.5*Math.sin(Z)*Math.sin($),te=7.5*Math.cos(Z);J.position.set(Q,ee,te),J.lookAt(0,0,0),this.mesh.add(J)}new THREE.CylinderGeometry(.5,.5,3,32),new THREE.MeshPhongMaterial({color:s.green,flatShading:!0});var ne=new THREE.SphereGeometry(.8,32,32),re=new THREE.MeshPhongMaterial({color:s.darkGreen,flatShading:!0});x.forEach((function(t){var n=new THREE.Mesh(ne,re);n.position.set(t.x,t.y-1.5,t.z),n.scale.set(1,.5,1.5),e.mesh.add(n)}))}},{key:"createNounsPilot",value:function(){var e=new THREE.BoxGeometry(15,15,15),t=new THREE.MeshPhongMaterial({color:s.yellow,flatShading:!0}),n=new THREE.Mesh(e,t);this.mesh.add(n);var r=new THREE.BoxGeometry(16,6,1),o=new THREE.MeshPhongMaterial({color:s.black,flatShading:!0}),i=new THREE.Mesh(r,o);i.position.set(0,2,7.5),this.mesh.add(i);var a=new THREE.TorusGeometry(3,1,16,100,Math.PI),c=new THREE.MeshPhongMaterial({color:s.black,flatShading:!0}),l=new THREE.Mesh(a,c);l.position.set(0,-2,7.5),l.rotation.x=Math.PI,this.mesh.add(l),this.addHyperLargeGlasses()}},{key:"addHyperLargeGlasses",value:function(){var e=new THREE.Group,t=new THREE.BoxGeometry(60,20,2),n=new THREE.MeshPhongMaterial({color:s.yellow}),r=new THREE.Mesh(t,n);r.position.set(0,5,12),e.add(r);var o=new THREE.BoxGeometry(24,16,1),i=new THREE.MeshPhongMaterial({color:65535,transparent:!0,opacity:.7}),a=new THREE.Mesh(o,i);a.position.set(-15,5,13),e.add(a);var c=a.clone();c.position.set(15,5,13),e.add(c);var l=new THREE.BoxGeometry(20,2,1),u=new THREE.MeshPhongMaterial({color:s.yellow}),h=new THREE.Mesh(l,u);h.position.set(-30,5,9),h.rotation.y=Math.PI/6,e.add(h);var p=h.clone();p.position.set(30,5,9),p.rotation.y=-Math.PI/6,e.add(p),e.scale.set(1.5,1.5,1.5),e.position.set(0,4,5),this.mesh.add(e)}},{key:"updateHairs",value:function(e){if("human"===this.pilotType){for(var t=this.hairsTop.children,n=t.length,r=0;r<n;r++)t[r].scale.y=.75+.25*Math.cos(this.angleHairs+r/3);this.angleHairs+=Bt.speed*e*40}}}])&&l(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(e){console.log("Creating blimp mesh with pilot type:",e);var t=new THREE.Object3D,n=new THREE.SphereGeometry(40,32,32),r=new THREE.MeshPhongMaterial({color:65280,flatShading:!0}),o=new THREE.Mesh(n,r);o.scale.set(2,1,1),t.add(o);var i=new THREE.BoxGeometry(5,5,5);[{color:0,position:[30,0,10]},{color:16711680,position:[30,0,-10]},{color:255,position:[-30,0,10]},{color:32768,position:[-30,0,-10]}].forEach((function(e){var t,n,r=e.color,a=e.position,s=new THREE.MeshPhongMaterial({color:r}),c=new THREE.Mesh(i,s);(t=c.position).set.apply(t,function(e){if(Array.isArray(e))return p(e)}(n=a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o.add(c)}));var a=new THREE.BoxGeometry(20,10,15),s=new THREE.MeshPhongMaterial({color:9127187,flatShading:!0}),c=new THREE.Mesh(a,s);c.position.set(0,-25,0),t.add(c);var l=new THREE.CylinderGeometry(10,10,20,32),u=new THREE.MeshPhongMaterial({color:16766720,flatShading:!0}),d=new THREE.Mesh(l,u);d.position.set(-60,-25,0);var f=new THREE.BoxGeometry(1,80,10),y=new THREE.MeshPhongMaterial({color:0,flatShading:!0}),m=new THREE.Mesh(f,y),v=m.clone();v.rotation.x=Math.PI/2,d.add(m),d.add(v),t.add(d);var w=new h(e);return w.mesh.position.set(0,-35,0),t.add(w.mesh),t.castShadow=!0,t.receiveShadow=!0,[t,d,w]}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function m(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}var v=new(function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.aircraftOptions=[{id:"airplane",emoji:"âœˆï¸"},{id:"blimp",emoji:"ðŸŽˆ"},{id:"fighterJet",emoji:"ðŸ›©ï¸",tokenRequired:!0}],this.selectedAircraft="airplane"},(t=[{key:"getAircraftOptions",value:function(){return this.aircraftOptions}},{key:"setSelectedAircraft",value:function(e){this.aircraftOptions.some((function(t){return t.id===e}))?this.selectedAircraft=e:console.error("Invalid aircraft selection: ".concat(e))}},{key:"getSelectedAircraft",value:function(){return this.selectedAircraft}}])&&y(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}());function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function E(e){var t=function(e){if("object"!=w(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:t+""}var b=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mesh=new THREE.Object3D;var t=new THREE.BoxGeometry(20,20,20);this.rainbowColors=[16711680,16744192,16776960,65280,255,9109759];for(var n=5+Math.floor(3*Math.random()),r=0;r<n;r++){var o=new THREE.MeshPhongMaterial({color:this.rainbowColors[r%this.rainbowColors.length],emissive:this.rainbowColors[r%this.rainbowColors.length],emissiveIntensity:.5,shininess:100}),i=new THREE.Mesh(t.clone(),o);i.position.x=12*r,i.position.y=10*Math.random(),i.position.z=10*Math.random(),i.rotation.y=Math.random()*Math.PI*2,i.rotation.z=Math.random()*Math.PI*2;var a=.8+.5*Math.random();i.scale.set(a,a,a),this.mesh.add(i),i.castShadow=!0,i.receiveShadow=!0;var s=new THREE.MeshBasicMaterial({color:this.rainbowColors[r%this.rainbowColors.length],transparent:!0,opacity:.5}),c=new THREE.Mesh(t.clone(),s);c.scale.multiplyScalar(1.2),i.add(c)}var l=new THREE.PointLight(16777215,1,100);l.position.set(6*n,5,5),this.mesh.add(l)},(t=[{key:"tick",value:function(e){for(var t=this.mesh.children.length,n=0;n<t;n++){var r=this.mesh.children[n];if(r instanceof THREE.Mesh){r.rotation.y+=.02*Math.random()*(n+1),r.rotation.z+=.03*Math.random()*(n+1);var o=(.001*Date.now()+.1*n)%1,i=(new THREE.Color).setHSL(o,1,.5);r.material.color.set(i),r.material.emissive.set(i),r.children[0]&&r.children[0].material.color.set(i);var a=.8+.5*Math.random(),s=.1*Math.sin(.005*Date.now()+n)+1;r.scale.set(a*s,a*s,a*s)}}var c=this.mesh.children[this.mesh.children.length-1];c instanceof THREE.PointLight&&(c.intensity=1+.5*Math.sin(.005*Date.now()))}}])&&g(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function S(e){var t=function(e){if("object"!=T(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==T(t)?t:t+""}var M=new(function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.promises=[],this.textureLoader=new THREE.TextureLoader},(t=[{key:"loadTexture",value:function(e){var t=this;return new Promise((function(n,r){t.textureLoader.load(e,(function(t){console.log("Texture loaded successfully:",e),n(t)}),void 0,(function(e){console.error("Error loading texture:",e),r(e)}))}))}},{key:"add",value:function(e){this.promises.push(e)}},{key:"then",value:function(e){return Promise.all(this.promises).then(e)}},{key:"catch",value:function(e){return Promise.all(this.promises).catch(e)}}])&&x(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}());function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,k(r.key),r)}}function k(e){var t=function(e){if("object"!=L(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==L(t)?t:t+""}var H=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.buffers={},this.loader=new THREE.AudioLoader,this.listener=new THREE.AudioListener,this.categories={}},t=[{key:"setCamera",value:function(e){e.add(this.listener)}},{key:"load",value:function(e,t,n){var r=this,o=new Promise((function(o,i){r.loader.load(n,(function(n){r.buffers[e]=n,null!==t&&(r.categories[t]||(r.categories[t]=[]),r.categories[t].push(e)),o()}),(function(){}),i)}));M.add(o)}},{key:"play",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e,r=this.categories[e];r&&(n=r[Math.floor(Math.random()*r.length)]);var o=this.buffers[n],i=new THREE.Audio(this.listener);i.setBuffer(o),t.loop&&i.setLoop(!0),t.volume&&i.setVolume(t.volume),i.play()}}],t&&R(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),P=new H;function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O(r.key),r)}}function O(e){var t=function(e){if("object"!=C(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==C(t)?t:t+""}var G=new(function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.path=t,this.models={}},(t=[{key:"load",value:function(e){var t=this,n=new Promise((function(n,r){(new THREE.OBJLoader).load(t.path+"/"+e+".obj",(function(r){t.models[e]=r,n()}),(function(){}),r)}));M.add(n)}},{key:"get",value:function(e){if(void 0===this.models[e])throw new Error("Can't find model "+e);return this.models[e]}}])&&j(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}())("/models"),B="https://base-sepolia.infura.io/v3/b52163bdfadb414386c2b1b84578a39b",I="https://rpc.zora.energy";const _=Web3;var D=e.n(_);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function z(){z=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new P(r||[]);return o(a,"_invoke",{value:L(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",d="suspendedYield",f="executing",y="completed",m={};function v(){}function w(){}function g(){}var E={};l(E,a,(function(){return this}));var b=Object.getPrototypeOf,T=b&&b(b(C([])));T&&T!==n&&r.call(T,a)&&(E=T);var x=g.prototype=v.prototype=Object.create(E);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function M(e,t){function n(o,i,a,s){var c=h(e[o],e,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==A(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function L(t,n,r){var o=p;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=R(s,r);if(c){if(c===m)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var l=h(t,n,r);if("normal"===l.type){if(o=r.done?y:d,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=y,r.method="throw",r.arg=l.arg)}}}function R(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,R(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=h(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function H(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(A(t)+" is not iterable")}return w.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:w,configurable:!0}),w.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(M.prototype),l(M.prototype,s,(function(){return this})),t.AsyncIterator=M,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new M(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(H),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),H(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;H(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function F(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function N(){return U.apply(this,arguments)}function U(){var e;return e=z().mark((function e(){var t,n,r,o=arguments;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:null,e.prev=1,!t){e.next=8;break}if(n={base:B,zora:I}[t]){e.next=7;break}throw new Error("No RPC URL found for network: ".concat(t));case 7:return e.abrupt("return",new(D())(new(D().providers.HttpProvider)(n)));case 8:if(void 0===window.ethereum){e.next=13;break}return r=new(D())(window.ethereum),e.next=12,window.ethereum.request({method:"eth_requestAccounts"});case 12:return e.abrupt("return",r);case 13:throw new Error("No Web3 provider found");case 16:throw e.prev=16,e.t0=e.catch(1),console.error("Error initializing Web3:",e.t0),e.t0;case 20:case"end":return e.stop()}}),e,null,[[1,16]])})),U=function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){F(i,r,o,a,s,"next",e)}function s(e){F(i,r,o,a,s,"throw",e)}a(void 0)}))},U.apply(this,arguments)}function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function W(){W=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new P(r||[]);return o(a,"_invoke",{value:L(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",d="suspendedYield",f="executing",y="completed",m={};function v(){}function w(){}function g(){}var E={};l(E,a,(function(){return this}));var b=Object.getPrototypeOf,T=b&&b(b(C([])));T&&T!==n&&r.call(T,a)&&(E=T);var x=g.prototype=v.prototype=Object.create(E);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function M(e,t){function n(o,i,a,s){var c=h(e[o],e,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==q(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function L(t,n,r){var o=p;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=R(s,r);if(c){if(c===m)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var l=h(t,n,r);if("normal"===l.type){if(o=r.done?y:d,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=y,r.method="throw",r.arg=l.arg)}}}function R(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,R(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=h(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function H(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(q(t)+" is not iterable")}return w.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:w,configurable:!0}),w.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(M.prototype),l(M.prototype,s,(function(){return this})),t.AsyncIterator=M,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new M(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(H),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),H(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;H(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function Y(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function X(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Y(i,r,o,a,s,"next",e)}function s(e){Y(i,r,o,a,s,"throw",e)}a(void 0)}))}}function V(){return K.apply(this,arguments)}function K(){return(K=X(W().mark((function e(){var t,n;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N();case 3:return t=e.sent,e.next=6,t.eth.net.getId();case 6:return n=e.sent,console.log("Connected to network ID:",n),e.abrupt("return",n);case 11:return e.prev=11,e.t0=e.catch(0),console.error("Web3 not initialized"),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function J(){return $.apply(this,arguments)}function $(){return($=X(W().mark((function e(){var t,n;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N();case 3:return t=e.sent,e.next=6,t.eth.getAccounts();case 6:if(0!==(n=e.sent).length){e.next=10;break}return console.error("No accounts found"),e.abrupt("return",null);case 10:return e.abrupt("return",n[0]);case 13:return e.prev=13,e.t0=e.catch(0),console.error("Web3 not initialized"),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function Z(e){return Q.apply(this,arguments)}function Q(){return(Q=X(W().mark((function e(t){var n,r;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.ensdata.net/".concat(t));case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("Network response was not ok: ".concat(n.statusText));case 6:return e.next=8,n.json();case 8:return r=e.sent,e.abrupt("return",r.ens_primary||null);case 12:return e.prev=12,e.t0=e.catch(0),console.error("Error resolving ENS name for address ".concat(t,":"),e.t0),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return(te=X(W().mark((function e(t){var n;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(t);case 2:return n=e.sent,e.abrupt("return",n||"".concat(t.slice(0,6),"...").concat(t.slice(-4)));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e){return re.apply(this,arguments)}function re(){return re=X(W().mark((function e(t){var n,r,o,i,a,s=arguments;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:null,r=document.getElementById("connect-wallet"),o=document.getElementById("wallet-info"),i=document.getElementById("wallet-address"),!t||!n){e.next=13;break}return r.classList.add("hidden"),o.classList.remove("hidden"),e.next=9,ee(n);case 9:a=e.sent,i.textContent=a,e.next=16;break;case 13:r.classList.remove("hidden"),o.classList.add("hidden"),i.textContent="";case 16:case"end":return e.stop()}}),e)}))),re.apply(this,arguments)}var oe=[{constant:!0,inputs:[{name:"account",type:"address"},{name:"id",type:"uint256"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],ie=[{constant:!0,inputs:[{name:"owner",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"implementation",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"}];function ae(e){return se.apply(this,arguments)}function se(){return(se=X(W().mark((function e(t){var n,r,o,i,a,s,c,l;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:n=0,r=[{name:"base",rpcUrl:B},{name:"zora",rpcUrl:I}];case 4:if(!(n<r.length)){e.next=30;break}return o=r[n],e.prev=6,e.next=9,N(o.name);case 9:return i=e.sent,a=new i.eth.Contract(ie,"0x4a57b15E45d03bd85c8eE38dcFF9E2BF0e87dBCf"),e.next=13,a.methods.implementation().call();case 13:return s=e.sent,console.log("Implementation address: ".concat(s)),c=new i.eth.Contract(oe,s),e.next=18,c.methods.balanceOf(t,1).call();case 18:if(l=e.sent,console.log("ERC1155 Balance on ".concat(o.name,":"),l),!(l>0)){e.next=22;break}return e.abrupt("return",!0);case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(6),console.log("Error checking balance on ".concat(o.name,":"),e.t0);case 27:n++,e.next=4;break;case 30:return e.abrupt("return",!1);case 31:case"end":return e.stop()}}),e,null,[[6,24]])})))).apply(this,arguments)}function ce(){return le.apply(this,arguments)}function le(){return(le=X(W().mark((function e(){var t,n,r;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,void 0===window.ethereum){e.next=19;break}return e.next=4,window.ethereum.request({method:"eth_requestAccounts"});case 4:return e.next=6,J();case 6:if(!(t=e.sent)){e.next=19;break}return e.next=10,V();case 10:return e.next=12,ae(t);case 12:return n=e.sent,localStorage.setItem("walletState",JSON.stringify({userAddress:t,hasToken:n})),e.next=16,ne(!0,t);case 16:return r=new CustomEvent("walletStatusChanged",{detail:{userAddress:t,hasToken:n}}),document.dispatchEvent(r),e.abrupt("return",{userAddress:t,hasToken:n});case 19:e.next=26;break;case 21:e.prev=21,e.t0=e.catch(0),console.error("Failed to connect:",e.t0),localStorage.removeItem("walletState"),ne(!1);case 26:return e.abrupt("return",{userAddress:null,hasToken:!1});case 27:case"end":return e.stop()}}),e,null,[[0,21]])})))).apply(this,arguments)}function ue(){document.getElementById("wallet-modal").classList.add("hidden")}function he(){return pe.apply(this,arguments)}function pe(){return pe=X(W().mark((function e(){var t,n;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Setting up event listeners..."),t=document.getElementById("connect-wallet"),n=document.getElementById("close-modal"),t?(t.addEventListener("click",ce),console.log("Event listener added to connect button")):console.error("Connect wallet button not found"),n&&n.addEventListener("click",ue),window.ethereum&&window.ethereum.on("accountsChanged",function(){var e=X(W().mark((function e(t){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=5;break}return e.next=3,ne(!0,t[0]);case 3:e.next=6;break;case 5:ne(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)}))),pe.apply(this,arguments)}function de(){return(de=X(W().mark((function e(){var t,n,r,o;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Initializing WalletConnect..."),e.next=4,he();case 4:if(!(t=localStorage.getItem("walletState"))){e.next=17;break}if(n=JSON.parse(t),r=n.userAddress,n.hasToken,!r||!window.ethereum){e.next=17;break}return e.next=10,window.ethereum.request({method:"eth_accounts"});case 10:if(!((o=e.sent).length>0&&o[0].toLowerCase()===r.toLowerCase())){e.next=16;break}return e.next=14,ne(!0,r);case 14:e.next=17;break;case 16:localStorage.removeItem("walletState");case 17:console.log("WalletConnect initialized successfully"),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.log("WalletConnect initialization failed, continuing with limited functionality");case 23:case"end":return e.stop()}}),e,null,[[0,20]])})))).apply(this,arguments)}function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function ye(){ye=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new P(r||[]);return o(a,"_invoke",{value:L(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",d="suspendedYield",f="executing",y="completed",m={};function v(){}function w(){}function g(){}var E={};l(E,a,(function(){return this}));var b=Object.getPrototypeOf,T=b&&b(b(C([])));T&&T!==n&&r.call(T,a)&&(E=T);var x=g.prototype=v.prototype=Object.create(E);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function M(e,t){function n(o,i,a,s){var c=h(e[o],e,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==fe(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function L(t,n,r){var o=p;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=R(s,r);if(c){if(c===m)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var l=h(t,n,r);if("normal"===l.type){if(o=r.done?y:d,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=y,r.method="throw",r.arg=l.arg)}}}function R(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,R(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=h(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function H(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(fe(t)+" is not iterable")}return w.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:w,configurable:!0}),w.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(M.prototype),l(M.prototype,s,(function(){return this})),t.AsyncIterator=M,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new M(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(H),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),H(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;H(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function me(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,we(r.key),r)}}function we(e){var t=function(e){if("object"!=fe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==fe(t)?t:t+""}window.addEventListener("load",(function(){return de.apply(this,arguments)}));var ge=new(function(){return e=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pilotOptions=[{id:"human",emoji:"ðŸ‘¨ðŸ¼â€ðŸ¦°",name:"Human"},{id:"frog",emoji:"ðŸŽ©",name:"Frog"},{id:"nouns",emoji:"ðŸ˜Ž",name:"Nouns",tokenRequired:!0}],this.selectedPilot=null,this.selectedAircraft=null,this.startButton=null,this.startButtonTooltip=null,this.userAddress=null,this.hasToken=!1,this.cleanup=function(){var e,n,r;document.removeEventListener("DOMContentLoaded",t.initSelectionScreen),null===(e=t.startButton)||void 0===e||e.removeEventListener("click",t.handleStartClick),null===(n=t.startButton)||void 0===n||n.removeEventListener("mouseenter",t.showTooltip),null===(r=t.startButton)||void 0===r||r.removeEventListener("mouseleave",t.hideTooltip)},document.addEventListener("DOMContentLoaded",(function(){t.initSelectionScreen(),t.setupInfoModal(),t.startButton=document.getElementById("start-game"),t.startButtonTooltip=document.getElementById("start-game-tooltip"),t.startButton.addEventListener("click",(function(){return t.handleStartClick()})),t.startButton.addEventListener("mouseenter",(function(){return t.showTooltip()})),t.startButton.addEventListener("mouseleave",(function(){return t.hideTooltip()}))})),document.addEventListener("walletStatusChanged",(function(e){var n=e.detail.hasToken;console.log("Wallet status changed event received:",n),t.hasToken=n,t.updateSelectionOptions()}));var n=localStorage.getItem("walletState");if(n){var r=JSON.parse(n),o=r.userAddress,i=r.hasToken;this.userAddress=o,this.hasToken=i}},t=[{key:"initSelectionScreen",value:(n=ye().mark((function e(){var t,n,r=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("pilot-options"),n=document.getElementById("aircraft-options"),t&&n){e.next=5;break}return console.error("Selection containers not found in the DOM"),e.abrupt("return");case 5:this.pilotOptions.forEach((function(e){var n=r.createSelectionOption(e,"pilot");e.tokenRequired&&n.classList.toggle("hidden",!r.hasToken),t.appendChild(n)})),v.getAircraftOptions().forEach((function(e){var t=r.createSelectionOption(e,"aircraft");e.tokenRequired&&t.classList.toggle("hidden",!r.hasToken),n.appendChild(t)})),this.updateStartButton();case 8:case"end":return e.stop()}}),e,this)})),r=function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function a(e){me(i,r,o,a,s,"next",e)}function s(e){me(i,r,o,a,s,"throw",e)}a(void 0)}))},function(){return r.apply(this,arguments)})},{key:"createSelectionOption",value:function(e,t){var n=this,r=document.createElement("div");r.classList.add("selection-option"),r.dataset.id=e.id,r.dataset.type=t;var o=document.createElement("span");o.textContent=e.emoji,o.classList.add("selection-emoji"),r.appendChild(o);var i=document.createElement("span");return i.textContent=e.name,i.classList.add("selection-name"),r.appendChild(i),r.addEventListener("click",(function(){return n.selectOption(e.id,t)})),r}},{key:"selectOption",value:function(e,t){document.querySelectorAll('.selection-option[data-type="'.concat(t,'"]')).forEach((function(e){return e.classList.remove("selected")}));var n=document.querySelector('.selection-option[data-id="'.concat(e,'"][data-type="').concat(t,'"]'));n&&(n.classList.add("selected"),"pilot"===t?this.selectedPilot=e:"aircraft"===t&&(this.selectedAircraft=e,v.setSelectedAircraft(e))),this.updateStartButton()}},{key:"updateStartButton",value:function(){this.startButton&&(this.selectedPilot&&this.selectedAircraft?(this.startButton.classList.add("visible"),this.startButton.disabled=!1):(this.startButton.classList.remove("visible"),this.startButton.disabled=!0))}},{key:"handleStartClick",value:function(){var e=this;this.startButton.disabled?(this.showTooltip(),setTimeout((function(){return e.hideTooltip()}),2e3)):this.startMap()}},{key:"showTooltip",value:function(){if(this.startButton.disabled&&this.startButtonTooltip){this.startButtonTooltip.style.display="block",this.startButtonTooltip.classList.add("visible");var e=this.startButton.getBoundingClientRect();this.startButtonTooltip.style.top="".concat(e.bottom+10,"px"),this.startButtonTooltip.style.left="".concat(e.left+e.width/2,"px"),this.startButtonTooltip.offsetHeight,this.startButtonTooltip.style.opacity="1"}}},{key:"hideTooltip",value:function(){var e=this;this.startButtonTooltip&&(this.startButtonTooltip.style.opacity="0",setTimeout((function(){e.startButtonTooltip.classList.remove("visible"),e.startButtonTooltip.style.display="none"}),300))}},{key:"startMap",value:function(){if(this.selectedPilot&&this.selectedAircraft){console.log("Starting map with selected pilot:",this.selectedPilot,"and aircraft:",this.selectedAircraft),document.getElementById("intro-screen").classList.add("hidden"),document.querySelector(".header").classList.add("game-started");var e=document.getElementById("score-wrapper");e.classList.remove("hidden"),setTimeout((function(){e.classList.add("visible")}),50);var t=new CustomEvent("selectionComplete",{detail:{pilot:this.selectedPilot,aircraft:this.selectedAircraft}});document.dispatchEvent(t),console.log("selectionComplete event dispatched")}else console.log("Please select both a pilot and an aircraft before starting the game")}},{key:"getSelection",value:function(){return{pilot:this.selectedPilot,aircraft:this.selectedAircraft}}},{key:"updateSelectionOptions",value:function(){var e=this;this.pilotOptions.forEach((function(t){var n=document.querySelector('[data-id="'.concat(t.id,'"][data-type="pilot"]'));n&&t.tokenRequired&&n.classList.toggle("hidden",!e.hasToken)})),v.getAircraftOptions().forEach((function(t){var n=document.querySelector('[data-id="'.concat(t.id,'"][data-type="aircraft"]'));n&&t.tokenRequired&&n.classList.toggle("hidden",!e.hasToken)})),console.log("Token status:",this.hasToken),console.log("Updating selection options visibility"),this.updateStartButton()}},{key:"setupInfoModal",value:function(){var e=document.getElementById("selection-info"),t=document.getElementById("info-modal"),n=document.querySelector(".close-info");if(e&&t&&n){var r=document.createElement("div");r.id="info-modal-container",r.style.position="absolute",r.style.zIndex="1000",document.body.appendChild(r),r.appendChild(t),e.addEventListener("click",(function(n){n.stopPropagation();var o=e.getBoundingClientRect();r.style.top="".concat(o.bottom+10,"px"),r.style.left="".concat(o.left,"px"),t.classList.remove("hidden")})),n.addEventListener("click",(function(e){e.stopPropagation(),t.classList.add("hidden")})),document.addEventListener("click",(function(n){t.contains(n.target)||n.target===e||t.classList.add("hidden")}))}else console.error("Info modal elements not found")}},{key:"destroy",value:function(){this.cleanup()}}],t&&ve(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r}());function Ee(e){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(e)}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Te(r.key),r)}}function Te(e){var t=function(e){if("object"!=Ee(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ee(t)?t:t+""}var xe=function(){return e=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t,this.scene=n,this.camera=r,this.snapshot=null,this.captureTime=5e3,this.gameStartTime=null},(t=[{key:"startCapture",value:function(){this.gameStartTime=Date.now(),this.snapshot=null,this.checkAndCapture()}},{key:"checkAndCapture",value:function(){var e=this;this.snapshot||(Date.now()-this.gameStartTime>=this.captureTime?this.captureSnapshot():requestAnimationFrame((function(){return e.checkAndCapture()})))}},{key:"captureSnapshot",value:function(){this.renderer.render(this.scene,this.camera);var e=this.renderer.domElement.toDataURL("image/jpeg",.7);this.snapshot=e}},{key:"checkGameEnd",value:function(e){"playing"!==e&&this.snapshot&&this.displaySnapshot()}},{key:"getSnapshot",value:function(){return this.snapshot}},{key:"displaySnapshot",value:function(){var e=document.getElementById("gameplay-snapshot"),t=document.getElementById("gameplay-snapshot-container");this.snapshot?(e.src=this.snapshot,t.style.display="block"):t.style.display="none"}},{key:"clearSnapshot",value:function(){this.snapshot=null}}])&&be(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const Se=xe;function Me(e){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}function Le(){Le=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new P(r||[]);return o(a,"_invoke",{value:L(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",d="suspendedYield",f="executing",y="completed",m={};function v(){}function w(){}function g(){}var E={};l(E,a,(function(){return this}));var b=Object.getPrototypeOf,T=b&&b(b(C([])));T&&T!==n&&r.call(T,a)&&(E=T);var x=g.prototype=v.prototype=Object.create(E);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function M(e,t){function n(o,i,a,s){var c=h(e[o],e,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Me(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function L(t,n,r){var o=p;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=R(s,r);if(c){if(c===m)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var l=h(t,n,r);if("normal"===l.type){if(o=r.done?y:d,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=y,r.method="throw",r.arg=l.arg)}}}function R(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,R(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=h(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function H(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Me(t)+" is not iterable")}return w.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:w,configurable:!0}),w.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(M.prototype),l(M.prototype,s,(function(){return this})),t.AsyncIterator=M,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new M(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(H),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),H(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;H(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function Re(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,He(r.key),r)}}function He(e){var t=function(e){if("object"!=Me(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Me(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Me(t)?t:t+""}const Pe=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=document.getElementById(t),this.gameData=n||{}},t=[{key:"render",value:function(){var e=this.createTwitterButton();this.container.innerHTML="",this.container.appendChild(e)}},{key:"createTwitterButton",value:function(){var e=document.createElement("a");return e.href="#",e.className="twitter-share-button",e.innerHTML="Tweet",e.addEventListener("click",this.shareOnTwitter.bind(this)),e}},{key:"shareOnTwitter",value:(n=Le().mark((function e(t){var n,r;return Le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=this.generateShareText(),r="https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(n),"\n\n").concat(encodeURIComponent("https://pic.twitter.com/J2LyIkNC94"),"&url=").concat(encodeURIComponent("https://thebaseglobe.netlify.app")),window.open(r,"_blank","width=550,height=420");case 6:case"end":return e.stop()}}),e,this)})),r=function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function a(e){Re(i,r,o,a,s,"next",e)}function s(e){Re(i,r,o,a,s,"throw",e)}a(void 0)}))},function(e){return r.apply(this,arguments)})},{key:"generateShareText",value:function(){var e=this.gameData,t=e.coinsCollected,n=void 0===t?0:t,r=e.enemiesKilled,o=void 0===r?0:r,i=e.shotsFired,a=void 0===i?0:i,s=e.lifesLost,c=void 0===s?0:s;return"Base Around The Globe ðŸŒŽ \n#standwithcrypto $byegary\n\nCoins: ".concat(n,"\nGary's ByeBye'd ðŸ‘‹: ").concat(o,"\nShots Fired: ").concat(a,"\nDamage Taken: ").concat(c,"\n\n")}}],t&&ke(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r}();function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function je(){je=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new P(r||[]);return o(a,"_invoke",{value:L(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",d="suspendedYield",f="executing",y="completed",m={};function v(){}function w(){}function g(){}var E={};l(E,a,(function(){return this}));var b=Object.getPrototypeOf,T=b&&b(b(C([])));T&&T!==n&&r.call(T,a)&&(E=T);var x=g.prototype=v.prototype=Object.create(E);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function M(e,t){function n(o,i,a,s){var c=h(e[o],e,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Ce(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function L(t,n,r){var o=p;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=R(s,r);if(c){if(c===m)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var l=h(t,n,r);if("normal"===l.type){if(o=r.done?y:d,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=y,r.method="throw",r.arg=l.arg)}}}function R(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,R(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=h(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function H(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Ce(t)+" is not iterable")}return w.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:w,configurable:!0}),w.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(M.prototype),l(M.prototype,s,(function(){return this})),t.AsyncIterator=M,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new M(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(H),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),H(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;H(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function Oe(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}var Ge=[{constant:!0,inputs:[],name:"implementation",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"}],Be=[{constant:!0,inputs:[{name:"owner",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}];function Ie(e,t){return _e.apply(this,arguments)}function _e(){return(e=je().mark((function e(t,n){var r,o,i,a,s,c,l;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Checking ownership for contract ".concat(t," on ").concat(n)),e.next=4,N(n);case 4:return r=e.sent,e.next=7,r.eth.getAccounts();case 7:return o=e.sent,i=o[0],a=new r.eth.Contract(Ge,t),e.next=12,a.methods.implementation().call();case 12:return s=e.sent,console.log("Implementation address for ".concat(t,": ").concat(s)),c=new r.eth.Contract(Be,s),e.next=17,c.methods.balanceOf(i).call();case 17:return l=e.sent,console.log("Balance for ".concat(t,": ").concat(l)),e.abrupt("return",BigInt(l)>0n);case 22:return e.prev=22,e.t0=e.catch(0),console.error("Error in checkTokenOwnership for ".concat(t,":"),e.t0),e.abrupt("return",!1);case 26:case"end":return e.stop()}}),e,null,[[0,22]])})),_e=function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Oe(i,r,o,a,s,"next",e)}function s(e){Oe(i,r,o,a,s,"throw",e)}a(void 0)}))}).apply(this,arguments);var e}function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function Ae(){Ae=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new P(r||[]);return o(a,"_invoke",{value:L(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",d="suspendedYield",f="executing",y="completed",m={};function v(){}function w(){}function g(){}var E={};l(E,a,(function(){return this}));var b=Object.getPrototypeOf,T=b&&b(b(C([])));T&&T!==n&&r.call(T,a)&&(E=T);var x=g.prototype=v.prototype=Object.create(E);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function M(e,t){function n(o,i,a,s){var c=h(e[o],e,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==De(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function L(t,n,r){var o=p;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=R(s,r);if(c){if(c===m)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var l=h(t,n,r);if("normal"===l.type){if(o=r.done?y:d,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=y,r.method="throw",r.arg=l.arg)}}}function R(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,R(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=h(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function H(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(De(t)+" is not iterable")}return w.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:w,configurable:!0}),w.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(M.prototype),l(M.prototype,s,(function(){return this})),t.AsyncIterator=M,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new M(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(H),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),H(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;H(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function ze(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Fe(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Fe(e,t){if(e){if("string"==typeof e)return Ne(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ne(e,t):void 0}}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ye(r.key),r)}}function We(e,t,n){return t&&qe(e.prototype,t),n&&qe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ye(e){var t=function(e){if("object"!=De(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=De(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==De(t)?t:t+""}function Xe(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}var Ve,Ke,Je=null,$e=!1;function Ze(){var e;return e=Ae().mark((function e(){var t,n;return Ae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ie("0x1dd4245bc6b1bbd43caf9a5033e887067852123d","base");case 3:return t=e.sent,e.next=6,Ie("0x39e6EED85927e0203c2ae9790eDaeB431B8e43c1","base");case 6:n=e.sent,$e=t||n,console.log("Special effects access:",$e),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error checking token ownership:",e.t0),$e=!1;case 15:case"end":return e.stop()}}),e,null,[[0,11]])})),Ze=function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Xe(i,r,o,a,s,"next",e)}function s(e){Xe(i,r,o,a,s,"throw",e)}a(void 0)}))},Ze.apply(this,arguments)}M.loadTexture("./public/gens.png").then((function(e){console.log("Texture loaded:",e),Je=e,e.premultiplyAlpha=!0,e.minFilter=THREE.LinearFilter,e.magFilter=THREE.LinearFilter,function(){Ze.apply(this,arguments)}()})).catch((function(e){return console.error("Failed to load texture:",e)}));var Qe,et,tt,nt,rt,ot,it=new(function(){return We((function e(){Ue(this,e),this.list=new Set}),[{key:"add",value:function(e){tt.add(e.mesh),this.list.add(e)}},{key:"remove",value:function(e){tt.remove(e.mesh),this.list.delete(e)}},{key:"clear",value:function(){var e,t=ze(this.list);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.remove(n)}}catch(e){t.e(e)}finally{t.f()}}},{key:"tick",value:function(e){var t,n=ze(this.list);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.tick&&r.tick(e)}}catch(e){n.e(e)}finally{n.f()}}}])}()),at=(new Date).getTime(),st=(new Date).getTime();function ct(){function e(){rt.setSize(Ct.width,Ct.height),nt.aspect=Ct.width/Ct.height,nt.updateProjectionMatrix()}tt=new THREE.Scene,nt=new THREE.PerspectiveCamera(50,Ct.width/Ct.height,.1,1e4),P.setCamera(nt),tt.fog=new THREE.Fog(16243114,100,950),(rt=new THREE.WebGLRenderer({canvas:Ct.canvas,alpha:!0,antialias:!0,preserveDrawingBuffer:!0})).setSize(Ct.width,Ct.height),rt.setPixelRatio(window.devicePixelRatio?window.devicePixelRatio:1),rt.shadowMap.enabled=!0,e(),Ct.onResize(e),Ke=new Se(rt,tt,nt)}var lt=function(){return We((function e(){Ue(this,e),this.mesh=e.createMesh(),this.mesh.position.z=28,this.mesh.position.x=25,this.mesh.position.y=-8}),[{key:"downtime",value:function(){return.1}},{key:"damage",value:function(){return 1}},{key:"shoot",value:function(e){var t=this,n=this.downtime()/1.5,r=new THREE.Vector3;this.mesh.getWorldPosition(r),r.add(new THREE.Vector3(5,0,0)),Lt(this.damage(),r,e,.5,.3,3),wt(r.clone().add(new THREE.Vector3(2,0,0)),1,o.orange,.2),P.play("shot-soft");var i=this.mesh.position.x;TweenMax.to(this.mesh.position,{duration:n/2,x:i-4,onComplete:function(){TweenMax.to(t.mesh.position,{duration:n/2,x:i})}})}}],[{key:"createMesh",value:function(){var e=new THREE.MeshStandardMaterial({color:2236962,flatShading:!0,roughness:.5,metalness:1}),t=new THREE.Group,n=new THREE.Mesh(new THREE.CylinderGeometry(3,3,20),e);n.rotation.z=Math.PI/2,t.add(n);var r=new THREE.Mesh(new THREE.CylinderGeometry(1.5,1.5,20),e);return r.rotation.z=Math.PI/2,r.position.x=20,t.add(r),t}}])}(),ut=function(){return We((function e(){Ue(this,e),this.gun1=new lt,this.gun2=new lt,this.gun2.mesh.position.add(new THREE.Vector3(0,14,0)),this.mesh=new THREE.Group,this.mesh.add(this.gun1.mesh),this.mesh.add(this.gun2.mesh)}),[{key:"downtime",value:function(){return.15}},{key:"damage",value:function(){return this.gun1.damage()+this.gun2.damage()}},{key:"shoot",value:function(e){this.gun1.shoot(e),this.gun2.shoot(e)}}])}(),ht=function(){return We((function e(){Ue(this,e),this.mesh=e.createMesh(),this.mesh.position.z=28,this.mesh.position.x=-3,this.mesh.position.y=-5}),[{key:"downtime",value:function(){return.1}},{key:"damage",value:function(){return 5}},{key:"shoot",value:function(e){var t=this,n=this.downtime()/3,r=new THREE.Vector3;this.mesh.getWorldPosition(r),r.add(new THREE.Vector3(12,0,0)),Lt(this.damage(),r,e,.5,.8,6),wt(r.clone().add(new THREE.Vector3(2,0,0)),3,o.orange,.5),P.play("shot-hard");var i=this.mesh.position.x;TweenMax.to(this.mesh.position,{duration:n,x:i-4,onComplete:function(){TweenMax.to(t.mesh.position,{duration:n,x:i})}})}}],[{key:"createMesh",value:function(){var e=new THREE.MeshStandardMaterial({color:2236962,flatShading:!0,roughness:.5,metalness:1}),t=new THREE.Group,n=new THREE.Mesh(new THREE.CylinderGeometry(5,5,30),e);n.rotation.z=Math.PI/2,n.position.x=15,t.add(n);var r=new THREE.Mesh(new THREE.CylinderGeometry(2.5,2.5,19.8),e);r.rotation.z=Math.PI/2,r.position.x=39.9,t.add(r);var o=new THREE.Mesh(new THREE.CylinderGeometry(3.25,3.25,7.5),e);return o.rotation.z=Math.PI/2,o.position.x=53.55,t.add(o),t}}])}(),pt=function(){return We((function e(t,n,r){Ue(this,e),this.mesh=t,this.propeller=n,this.pilot=r,this.weapon=null,this.lastShot=0}),[{key:"equipWeapon",value:function(e){this.weapon&&this.mesh.remove(this.weapon.mesh),this.weapon=e,this.weapon&&this.mesh.add(this.weapon.mesh)}},{key:"shoot",value:function(){if(this.weapon){var e=(new Date).getTime()/1e3;if(e-this.lastShot>this.weapon.downtime()){this.lastShot=e;var t=new THREE.Vector3(10,0,0);t.applyEuler(bt.mesh.rotation),this.weapon.shoot(t);var n=this.weapon.damage();TweenMax.to(this.mesh.position,{duration:.05,x:this.mesh.position.x-n})}}}},{key:"tick",value:function(e){if(this.propeller.rotation.x+=.2+et.planeSpeed*e*.005,"playing"===et.status){et.planeSpeed=t(Ct.mousePos.x,-.5,.5,Qe.planeMinSpeed,Qe.planeMaxSpeed);var n=t(Ct.mousePos.x,-1,1,.7*-Qe.planeAmpWidth,-Qe.planeAmpWidth),r=t(Ct.mousePos.y,-.75,.75,Qe.planeDefaultHeight-Qe.planeAmpHeight,Qe.planeDefaultHeight+Qe.planeAmpHeight);et.planeCollisionDisplacementX+=et.planeCollisionSpeedX,n+=et.planeCollisionDisplacementX,et.planeCollisionDisplacementY+=et.planeCollisionSpeedY,r+=et.planeCollisionDisplacementY,this.mesh.position.x+=(n-this.mesh.position.x)*e*Qe.planeMoveSensivity,this.mesh.position.y+=(r-this.mesh.position.y)*e*Qe.planeMoveSensivity,this.mesh.rotation.x=(this.mesh.position.y-r)*e*Qe.planeRotZSensivity,this.mesh.rotation.z=(r-this.mesh.position.y)*e*Qe.planeRotXSensivity,et.fpv?nt.position.y=this.mesh.position.y+20:(nt.fov=t(Ct.mousePos.x,-30,1,40,80),nt.updateProjectionMatrix(),nt.position.y+=(this.mesh.position.y-nt.position.y)*e*Qe.cameraSensivity)}et.planeCollisionSpeedX+=(0-et.planeCollisionSpeedX)*e*.03,et.planeCollisionDisplacementX+=(0-et.planeCollisionDisplacementX)*e*.01,et.planeCollisionSpeedY+=(0-et.planeCollisionSpeedY)*e*.03,et.planeCollisionDisplacementY+=(0-et.planeCollisionDisplacementY)*e*.01,this.pilot.updateHairs(e)}},{key:"gethit",value:function(e){var t=this.mesh.position.clone().sub(e),n=t.length();et.planeCollisionSpeedX=100*t.x/n,et.planeCollisionSpeedY=100*t.y/n,ot.intensity=2,P.play("airplane-crash"),Ke.checkGameEnd(et.status)}}])}();function dt(e,t,n){e.angle+=t*et.speed*Qe.collectiblesSpeed,e.angle>2*Math.PI&&(e.angle-=2*Math.PI),e.mesh.position.x=Math.cos(e.angle)*e.distance,e.mesh.position.y=-Qe.seaRadius+Math.sin(e.angle)*e.distance}var ft=function(){return We((function e(t,n){Ue(this,e),this.angle=0,this.distance=0,this.onApply=n,this.mesh=new THREE.Object3D;var r=new THREE.Mesh(new THREE.SphereGeometry(10,100,100),new THREE.MeshPhongMaterial({color:a,transparent:!0,opacity:.5,flatShading:!0}));this.mesh.add(r),this.mesh.add(t),this.mesh.castShadow=!0,this.angle=2*Math.PI*.1,this.distance=Qe.seaRadius+Qe.planeDefaultHeight+(2*Math.random()-1)*(Qe.planeAmpHeight-20),this.mesh.position.y=-Qe.seaRadius+Math.sin(this.angle)*this.distance,this.mesh.position.x=Math.cos(this.angle)*this.distance,it.add(this)}),[{key:"tick",value:function(e){dt(this,e,Qe.collectiblesSpeed),this.mesh.rotation.y+=.002*e*Math.random(),this.mesh.rotation.z+=.002*e*Math.random(),n(bt.mesh,this.mesh,Qe.collectibleDistanceTolerance)?(this.onApply(),this.explode()):this.angle>Math.PI&&it.remove(this)}},{key:"explode",value:function(){var e=this;wt(this.mesh.position.clone(),15,a,3),it.remove(this),P.play("bubble"),setTimeout((function(){for(var t=new THREE.Group,n=1;n<e.mesh.children.length;n+=1)t.add(e.mesh.children[n]);tt.add(t),t.position.y=120,t.position.z=50;var r=t.scale.clone();TweenMax.to(t.scale,{duration:.5,x:4*r.x,y:4*r.y,z:4*r.z,ease:"Power2.easeInOut",onComplete:function(){TweenMax.to(t.scale,{duration:.5,x:0,y:0,z:0,ease:"Power2.easeInOut",onComplete:function(){tt.remove(t)}})}})}),200)}}])}();var yt=function(){return We((function e(){Ue(this,e),this.mesh=new THREE.Object3D,this.nClouds=20,this.clouds=[];for(var t=2*Math.PI/this.nClouds,n=0;n<this.nClouds;n++){var r=new b;this.clouds.push(r);var o=t*n,i=Qe.seaRadius+150+200*Math.random();r.mesh.position.y=Math.sin(o)*i,r.mesh.position.x=Math.cos(o)*i,r.mesh.position.z=-300-500*Math.random(),r.mesh.rotation.z=o+Math.PI/2;var a=1+2*Math.random();r.mesh.scale.set(a,a,a),this.mesh.add(r.mesh)}}),[{key:"tick",value:function(e){for(var t=0;t<this.nClouds;t++)this.clouds[t].tick(e);this.mesh.rotation.z+=et.speed*e}}])}(),mt=[6865856,4699055,3772043,2779752,1852740,860448],vt=function(){return We((function e(){Ue(this,e);var t=new THREE.CylinderGeometry(Qe.seaRadius,Qe.seaRadius,Qe.seaLength,40,10);t.applyMatrix4((new THREE.Matrix4).makeRotationX(-Math.PI/2)),this.waves=[];for(var n=t.attributes.position.array,r=0;r<n.length/3;r++)this.waves.push({x:n[3*r+0],y:n[3*r+1],z:n[3*r+2],ang:Math.random()*Math.PI*2,amp:Qe.wavesMinAmp+Math.random()*(Qe.wavesMaxAmp-Qe.wavesMinAmp),speed:Qe.wavesMinSpeed+Math.random()*(Qe.wavesMaxSpeed-Qe.wavesMinSpeed)});var o=new THREE.MeshPhongMaterial({color:mt[0],transparent:!0,opacity:.8,flatShading:!0});this.mesh=new THREE.Mesh(t,o),this.mesh.receiveShadow=!0}),[{key:"tick",value:function(e){for(var t=this.mesh.geometry.attributes.position.array,n=0;n<t.length/3;n++){var r=this.waves[n];t[3*n+0]=r.x+Math.cos(r.ang)*r.amp,t[3*n+1]=r.y+Math.sin(r.ang)*r.amp,r.ang+=r.speed*e}this.mesh.geometry.attributes.position.needsUpdate=!0}},{key:"updateColor",value:function(){this.mesh.material=new THREE.MeshPhongMaterial({color:mt[(et.level-1)%mt.length],transparent:!0,opacity:.8,flatShading:!0})}}])}();function wt(e,t,n,r){for(var o=function(){var t=$e?new THREE.PlaneGeometry(12,12):new THREE.TetrahedronGeometry(3,0),o=$e?new THREE.MeshPhongMaterial({color:16777215,map:Je,transparent:!0,depthWrite:!1,side:THREE.DoubleSide}):new THREE.MeshPhongMaterial({color:39321,shininess:0,specular:16777215,flatShading:!0}),i=new THREE.Mesh(t,o);tt.add(i),i.visible=!0,i.position.copy(e),i.material.color=new THREE.Color(n),i.material.needsUpdate=!0,i.scale.set(r,r,r),i.lookAt(nt.position);var a=e.x+50*(2*Math.random()-1),s=e.y+50*(2*Math.random()-1),c=e.z+50*(2*Math.random()-1),l=.6+.2*Math.random();TweenMax.to(i.rotation,l,{x:12*Math.random(),y:12*Math.random()}),TweenMax.to(i.scale,l,{x:.1,y:.1,z:.1}),TweenMax.to(i.position,l,{x:a,y:s,z:c,delay:.1*Math.random(),ease:Power2.easeOut,onComplete:function(){tt.remove(i)}})},i=0;i<t;i++)o()}var gt,Et,bt,Tt=function(){return We((function e(){Ue(this,e);var t=$e?new THREE.PlaneGeometry(24,24):new THREE.TetrahedronGeometry(8),n=$e?new THREE.MeshPhongMaterial({color:16777215,map:Je,transparent:!0,depthWrite:!1,side:THREE.DoubleSide}):new THREE.MeshPhongMaterial({color:16225071,flatShading:!0});this.mesh=new THREE.Mesh(t,n),this.mesh.castShadow=!0,this.angle=0,this.distance=0,this.hitpoints=3,it.add(this)}),[{key:"tick",value:function(e){dt(this,e,Qe.enemiesSpeed),this.mesh.lookAt(nt.position),n(bt.mesh,this.mesh,Qe.enemyDistanceTolerance)&&"finished"!==et.status?(this.explode(),bt.gethit(this.mesh.position),et.lifes=Math.max(0,et.lifes-1),Ct.updateLifesDisplay(),et.statistics.lifesLost+=1):this.angle>Math.PI&&it.remove(this);var t,r=(new THREE.Box3).setFromObject(this.mesh),i=ze(St);try{for(i.s();!(t=i.n()).done;){var a=t.value,s=(new THREE.Box3).setFromObject(a.mesh);r.intersectsBox(s)&&(wt(a.mesh.position.clone(),5,o.brownDark,1),a.remove(),this.hitpoints-=a.damage,P.play("bullet-impact",{volume:.3}))}}catch(e){i.e(e)}finally{i.f()}this.hitpoints<=0&&this.explode()}},{key:"explode",value:function(){P.play("rock-shatter",{volume:3}),wt(this.mesh.position.clone(),15,o.red,3),it.remove(this),et.statistics.enemiesKilled+=1}}])}(),xt=function(){return We((function e(){Ue(this,e);var t=new THREE.CylinderGeometry(4,4,1,10),n=new THREE.MeshPhongMaterial({color:i,shininess:1,specular:16777215,flatShading:!0});this.mesh=new THREE.Mesh(t,n),this.mesh.castShadow=!0,this.angle=0,this.dist=0,it.add(this)}),[{key:"tick",value:function(e){dt(this,e,Qe.coinsSpeed),this.mesh.rotation.z+=.1*Math.random(),this.mesh.rotation.y+=.1*Math.random(),n(bt.mesh,this.mesh,Qe.coinDistanceTolerance)?(wt(this.mesh.position.clone(),5,i,.8),et.coins+=1,Ct.updateCoinsCount(et.coins),et.statistics.coinsCollected+=1,P.play("coin",{volume:.5}),it.remove(this)):this.angle>Math.PI&&it.remove(this)}}])}(),St=[],Mt=function(){return We((function e(t,n,r,o,i,a){Ue(this,e),this.damage=t;var s=new THREE.MeshPhongMaterial({color:8388736,shininess:0,specular:16777215,flatShading:!0});this.mesh=new THREE.Mesh(new THREE.CylinderGeometry(i,i,a),s),this.mesh.rotation.z=Math.PI/2,this.mesh.position.copy(n),this.direction=r.clone(),this.direction.setLength(1),this.speed=o,it.add(this),et.statistics.shotsFired+=1}),[{key:"tick",value:function(e){this.mesh.position.add(this.direction.clone().multiplyScalar(this.speed*e)),this.mesh.position.z*=.9,this.mesh.position.x>1e3&&this.remove()}},{key:"remove",value:function(){it.remove(this),St.splice(St.indexOf(this),1)}}])}();function Lt(e,t,n,r,o,i){new THREE.PlaneGeometry(2*o,i),new THREE.MeshBasicMaterial({color:8388736}),St.push(new Mt(e,t,n,r,o,i))}function Rt(){var e,t,n=ge.getSelection(),i=(e=function(e,t){switch(console.log("Creating airplane mesh with pilot type:",e,"and aircraft type:",t),t){case"blimp":return d(e);case"fighterJet":return function(e){console.log("Creating fighter jet mesh with pilot type:",e);var t=new THREE.Object3D,n=new THREE.ConeGeometry(15,150,32),r=new THREE.MeshPhongMaterial({color:3100495}),o=new THREE.Mesh(n,r);o.rotation.z=Math.PI/2,t.add(o);var i=new THREE.SphereGeometry(12,32,32),a=new THREE.MeshPhongMaterial({color:2003199,opacity:.7,transparent:!0}),s=new THREE.Mesh(i,a);s.position.set(-60,15,0),t.add(s);var c=new THREE.BoxGeometry(50,5,100),l=new THREE.MeshPhongMaterial({color:3100495}),u=new THREE.Mesh(c,l);t.add(u);var p=new THREE.BoxGeometry(20,30,5),d=new THREE.CylinderGeometry(8,10,20,32),f=new THREE.MeshPhongMaterial({color:6908265}),y=new THREE.Mesh(p,l);y.position.set(60,15,-5),t.add(y);var m=y.clone();m.position.set(60,15,5),t.add(m);var v=new THREE.Mesh(d,f);v.position.set(30,-10,-15),t.add(v);var w=v.clone();w.position.set(30,-10,15),t.add(w);var g=new THREE.ConeGeometry(5,20,32),E=new THREE.MeshPhongMaterial({color:13882323}),b=new THREE.Mesh(g,E);b.position.set(-85,0,0),t.add(b);var T=new h(e);return T.mesh.position.set(-60,25,0),t.add(T.mesh),t.castShadow=!0,t.receiveShadow=!0,[t,b,T]}(e);default:return function(e){console.log("Creating original airplane mesh with pilot type:",e);var t=new THREE.Object3D,n=new THREE.MeshPhongMaterial({color:o.red,flatShading:!0,side:THREE.DoubleSide}),i=[40,25,-25],a=[40,25,25],s=[40,-25,-25],c=[40,-25,25],l=[-40,15,-5],u=[-40,15,5],p=[-40,5,-5],d=[-40,5,5],f=new Float32Array(r(a,i,c,s).concat(r(u,l,d,p)).concat(r(l,p,i,s)).concat(r(u,d,a,c)).concat(r(a,u,i,l)).concat(r(c,d,s,p))),y=new THREE.BufferGeometry;y.setAttribute("position",new THREE.BufferAttribute(f,3));var m=new THREE.Mesh(y,n);m.castShadow=!0,m.receiveShadow=!0,t.add(m);var v=new THREE.BoxGeometry(20,50,50,1,1,1),w=new THREE.MeshPhongMaterial({color:o.white,flatShading:!0}),g=new THREE.Mesh(v,w);g.position.x=50,g.castShadow=!0,g.receiveShadow=!0,t.add(g);var E=new THREE.BoxGeometry(15,20,5,1,1,1),b=new THREE.MeshPhongMaterial({color:o.red,flatShading:!0}),T=new THREE.Mesh(E,b);T.position.set(-40,20,0),T.castShadow=!0,T.receiveShadow=!0,t.add(T);var x=new THREE.BoxGeometry(30,5,120,1,1,1),S=new THREE.MeshPhongMaterial({color:o.red,flatShading:!0}),M=new THREE.Mesh(x,S);M.position.set(0,15,0),M.castShadow=!0,M.receiveShadow=!0,t.add(M);var L=new THREE.BoxGeometry(3,15,20,1,1,1),R=new THREE.MeshPhongMaterial({color:o.white,transparent:!0,opacity:.3,flatShading:!0}),k=new THREE.Mesh(L,R);k.position.set(20,27,0),k.castShadow=!0,k.receiveShadow=!0,t.add(k);var H=new THREE.BoxGeometry(20,10,10,1,1,1);H.attributes.position.array[13]-=5,H.attributes.position.array[14]+=5,H.attributes.position.array[16]-=5,H.attributes.position.array[17]-=5,H.attributes.position.array[19]+=5,H.attributes.position.array[20]+=5,H.attributes.position.array[22]+=5,H.attributes.position.array[23]-=5;var P=new THREE.MeshPhongMaterial({color:o.brown,flatShading:!0}),C=new THREE.Mesh(H,P);C.castShadow=!0,C.receiveShadow=!0;var j=new THREE.BoxGeometry(1,80,10,1,1,1),O=new THREE.MeshPhongMaterial({color:o.brownDark,flatShading:!0}),G=new THREE.Mesh(j,O);G.position.set(8,0,0),G.castShadow=!0,G.receiveShadow=!0;var B=G.clone();B.rotation.x=Math.PI/2,B.castShadow=!0,B.receiveShadow=!0,C.add(G),C.add(B),C.position.set(60,0,0),t.add(C);var I=new THREE.BoxGeometry(30,15,10,1,1,1),_=new THREE.MeshPhongMaterial({color:o.red,flatShading:!0}),D=new THREE.Mesh(I,_);D.position.set(25,-20,25),t.add(D);var A=new THREE.BoxGeometry(24,24,4),z=new THREE.MeshPhongMaterial({color:o.brownDark,flatShading:!0}),F=new THREE.Mesh(A,z);F.position.set(25,-28,25);var N=new THREE.BoxGeometry(10,10,6),U=new THREE.MeshPhongMaterial({color:o.brown,flatShading:!0}),q=new THREE.Mesh(N,U);F.add(q),t.add(F);var W=D.clone();W.position.z=-D.position.z,t.add(W);var Y=F.clone();Y.position.z=-F.position.z,t.add(Y);var X=F.clone();X.scale.set(.5,.5,.5),X.position.set(-35,-5,0),t.add(X);var V=new THREE.BoxGeometry(4,20,4);V.applyMatrix4((new THREE.Matrix4).makeTranslation(0,10,0));var K=new THREE.MeshPhongMaterial({color:o.red,flatShading:!0}),J=new THREE.Mesh(V,K);J.position.set(-35,-5,0),J.rotation.z=-.3,t.add(J);var $=new h(e);return $.mesh.position.set(5,27,0),t.add($.mesh),t.castShadow=!0,t.receiveShadow=!0,[t,C,$]}(e)}}(n.pilot,n.aircraft),t=3,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||Fe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],s=i[1],c=i[2];(bt=new pt(a,s,c)).mesh.scale.set(.25,.25,.25),bt.mesh.position.y=Qe.planeDefaultHeight,tt.add(bt.mesh)}function kt(){var e,t,n=(at=(new Date).getTime())-st;st=at,"playing"==et.status?(et.paused||(Math.floor(et.distance)%Qe.distanceForCoinsSpawn==0&&Math.floor(et.distance)>et.coinLastSpawn&&(et.coinLastSpawn=Math.floor(et.distance),function(){for(var e=1+Math.floor(10*Math.random()),t=Qe.seaRadius+Qe.planeDefaultHeight+(a=1,((i=-1)+Math.random()*(a-i))*(Qe.planeAmpHeight-20)),n=10+Math.round(10*Math.random()),r=0;r<e;r++){var o=new xt;o.angle=-.02*r,o.distance=t+Math.cos(.5*r)*n,o.mesh.position.y=-Qe.seaRadius+Math.sin(o.angle)*o.distance,o.mesh.position.x=Math.cos(o.angle)*o.distance}var i,a;et.statistics.coinsSpawned+=e}()),Math.floor(et.distance)%Qe.distanceForSpeedUpdate==0&&Math.floor(et.distance)>et.speedLastUpdate&&(et.speedLastUpdate=Math.floor(et.distance),et.targetBaseSpeed+=Qe.incrementSpeedByTime*n),Math.floor(et.distance)%Qe.distanceForEnemiesSpawn==0&&Math.floor(et.distance)>et.enemyLastSpawn&&(et.enemyLastSpawn=Math.floor(et.distance),function(e){for(var t=0;t<e;t++){var n=new Tt;n.angle=-.1*t,n.distance=Qe.seaRadius+Qe.planeDefaultHeight+(2*Math.random()-1)*(Qe.planeAmpHeight-20),n.mesh.position.x=Math.cos(n.angle)*n.distance,n.mesh.position.y=-Qe.seaRadius+Math.sin(n.angle)*n.distance}et.statistics.enemiesSpawned+=e}(et.level)),Math.floor(et.distance)%Qe.distanceForLevelUpdate==0&&Math.floor(et.distance)>et.levelLastUpdate&&(et.levelLastUpdate=Math.floor(et.distance),et.level+=1,et.level===Qe.levelCount?(et.status="finished",Pt(),Ct.showScoreScreen()):(Ct.informNextLevel(et.level),gt.updateColor(),Et.updateColor(),Ct.updateLevelCount(),et.targetBaseSpeed=Qe.initSpeed+Qe.incrementSpeedByLevel*et.level)),et.lifes<Qe.maxLifes&&et.distance-et.lastLifeSpawn>Qe.pauseLifeSpawn&&Math.random()<.01&&(et.lastLifeSpawn=et.distance,(t=G.get("heart")).traverse((function(e){e instanceof THREE.Mesh&&e.material.color.setHex(16711680)})),t.position.set(0,-1,-3),t.scale.set(5,5,5),new ft(t,(function(){et.lifes=Math.min(Qe.maxLifes,et.lifes+1),Ct.updateLifesDisplay()}))),!et.spawnedSimpleGun&&et.distance>Qe.simpleGunLevelDrop*Qe.distanceForLevelUpdate&&((e=lt.createMesh()).scale.set(.25,.25,.25),e.position.x=-2,new ft(e,(function(){bt.equipWeapon(new lt)})),et.spawnedSimpleGun=!0),!et.spawnedDoubleGun&&et.distance>Qe.doubleGunLevelDrop*Qe.distanceForLevelUpdate&&(function(){var e=new THREE.Group,t=lt.createMesh();t.scale.set(.25,.25,.25),t.position.x=-2,t.position.y=-2,e.add(t);var n=lt.createMesh();n.scale.set(.25,.25,.25),n.position.x=-2,n.position.y=2,e.add(n),new ft(e,(function(){bt.equipWeapon(new ut)}))}(),et.spawnedDoubleGun=!0),!et.spawnedBetterGun&&et.distance>Qe.betterGunLevelDrop*Qe.distanceForLevelUpdate&&(function(){var e=ht.createMesh();e.scale.set(.25,.25,.25),e.position.x=-7,new ft(e,(function(){bt.equipWeapon(new ht)}))}(),et.spawnedBetterGun=!0),(Ct.mouseButtons[0]||Ct.keysDown.Space)&&bt.shoot(),bt.tick(n),et.distance+=et.speed*n*Qe.ratioSpeedDistance,et.baseSpeed+=(et.targetBaseSpeed-et.baseSpeed)*n*.02,et.speed=et.baseSpeed*et.planeSpeed,Ct.updateDistanceDisplay(),et.lifes<=0&&(et.status="gameover")),Ke&&Ke.checkAndCapture()):"gameover"==et.status?(et.speed*=.99,bt.mesh.rotation.z+=2e-4*(-Math.PI/2-bt.mesh.rotation.z)*n,bt.mesh.rotation.x+=3e-4*n,et.planeFallSpeed*=1.05,bt.mesh.position.y-=et.planeFallSpeed*n,bt.mesh.position.y<-200&&(Ct.showReplay(),et.status="waitingReplay",P.play("water-splash"))):et.status,Ke.checkGameEnd(et.status),et.paused||(bt.tick(n),gt.mesh.rotation.z+=et.speed*n,gt.mesh.rotation.z>2*Math.PI&&(gt.mesh.rotation.z-=2*Math.PI),ot.intensity+=(.5-ot.intensity)*n*.005,it.tick(n),Ve.tick(n),gt.tick(n)),rt.render(tt,nt),requestAnimationFrame(kt)}function Ht(){et.fpv=!1,nt.position.set(0,Qe.planeDefaultHeight,200),nt.setRotationFromEuler(new THREE.Euler(0,0,0))}function Pt(){et.fpv=!0,nt.position.set(-89,bt.mesh.position.y+20,0),nt.setRotationFromEuler(new THREE.Euler(-1.490248,-1.4124514,-1.48923231)),nt.updateProjectionMatrix()}var Ct,jt=function(){return We((function e(t,n){Ue(this,e),this.gameplaySnapshotManager=n,this._elemDistanceCounter=document.getElementById("distValue"),this._elemReplayMessage=document.getElementById("replayMessage"),this._elemLevelCounter=document.getElementById("levelValue"),this._elemLevelCircle=document.getElementById("levelCircleStroke"),this._elemsLifes=document.querySelectorAll("#lifes img"),this._elemCoinsCount=document.getElementById("coinsValue"),document.querySelector("#intro-screen button").onclick=function(){document.getElementById("intro-screen").classList.remove("visible"),t()},document.addEventListener("keydown",this.handleKeyDown.bind(this),!1),document.addEventListener("keyup",this.handleKeyUp.bind(this),!1),document.addEventListener("mousedown",this.handleMouseDown.bind(this),!1),document.addEventListener("mouseup",this.handleMouseUp.bind(this),!1),document.addEventListener("mousemove",this.handleMouseMove.bind(this),!1),document.addEventListener("blur",this.handleBlur.bind(this),!1),document.oncontextmenu=document.body.oncontextmenu=function(){return!1},window.addEventListener("resize",this.handleWindowResize.bind(this),!1),this.width=window.innerWidth,this.height=window.innerHeight,this.mousePos={x:0,y:0},this.canvas=document.getElementById("threejs-canvas"),this.mouseButtons=[!1,!1,!1],this.keysDown={},this._resizeListeners=[]}),[{key:"onResize",value:function(e){this._resizeListeners.push(e)}},{key:"handleWindowResize",value:function(e){this.width=window.innerWidth,this.height=window.innerHeight;var t,n=ze(this._resizeListeners);try{for(n.s();!(t=n.n()).done;)(0,t.value)()}catch(e){n.e(e)}finally{n.f()}}},{key:"handleMouseMove",value:function(e){var t=e.clientX/this.width*2-1,n=1-e.clientY/this.height*2;this.mousePos={x:t,y:n}}},{key:"handleTouchMove",value:function(e){e.preventDefault();var t=e.touches[0].pageX/this.width*2-1,n=1-e.touches[0].pageY/this.height*2;this.mousePos={x:t,y:n}}},{key:"handleMouseDown",value:function(e){this.mouseButtons[e.button]=!0,1===e.button&&"playing"===et.status&&bt.shoot()}},{key:"handleKeyDown",value:function(e){this.keysDown[e.code]=!0,"KeyP"===e.code&&(et.paused=!et.paused),"Space"===e.code&&bt.shoot(),"Enter"===e.code&&(et.fpv?Ht():Pt())}},{key:"handleKeyUp",value:function(e){this.keysDown[e.code]=!1}},{key:"handleMouseUp",value:function(e){this.mouseButtons[e.button]=!1,e.preventDefault(),et&&"waitingReplay"==et.status&&(Ot(),this.informNextLevel(1),et.paused=!1,gt.updateColor(),Et.updateColor(),this.updateDistanceDisplay(),this.updateLevelCount(),this.updateLifesDisplay(),this.updateCoinsCount(),this.hideReplay())}},{key:"handleBlur",value:function(e){this.mouseButtons=[!1,!1,!1]}},{key:"showReplay",value:function(){this._elemReplayMessage.style.display="block"}},{key:"hideReplay",value:function(){this._elemReplayMessage.style.display="none"}},{key:"updateLevelCount",value:function(){this._elemLevelCounter.innerText=et.level}},{key:"updateCoinsCount",value:function(){this._elemCoinsCount.innerText=et.coins}},{key:"updateDistanceDisplay",value:function(){this._elemDistanceCounter.innerText=Math.floor(et.distance);var e=502*(1-et.distance%Qe.distanceForLevelUpdate/Qe.distanceForLevelUpdate);this._elemLevelCircle.setAttribute("stroke-dashoffset",e)}},{key:"updateLifesDisplay",value:function(){for(var e=0,t=this._elemsLifes.length;e<t;e+=1){var n=e<et.lifes,r=this._elemsLifes[e];n&&!r.classList.contains("visible")?(r.classList.remove("invisible"),r.classList.add("visible")):n||r.classList.contains("invisible")||(r.classList.remove("visible"),r.classList.add("invisible"))}}},{key:"informNextLevel",value:function(e){var t=document.getElementById("new-level");t.style.visibility="visible",t.style.animationDuration=Math.round(1e3)+"ms",t.children[1].innerText=e,t.classList.add("animating"),setTimeout((function(){document.getElementById("new-level").style.visibility="hidden",t.classList.remove("animating")}),1e3)}},{key:"showScoreScreen",value:function(){document.getElementById("score-screen").classList.add("visible");var e=Ke.getSnapshot(),t=document.getElementById("gameplay-snapshot-container"),n=document.getElementById("gameplay-snapshot");e?(n.src=e,t.style.display="block"):t.style.display="none",document.getElementById("score-coins-collected").innerText=et.statistics.coinsCollected,document.getElementById("score-coins-total").innerText=et.statistics.coinsSpawned,document.getElementById("score-enemies-killed").innerText=et.statistics.enemiesKilled,document.getElementById("score-enemies-total").innerText=et.statistics.enemiesSpawned,document.getElementById("score-shots-fired").innerText=et.statistics.shotsFired,document.getElementById("score-lifes-lost").innerText=et.statistics.lifesLost;var r={coinsCollected:et.statistics.coinsCollected,enemiesKilled:et.statistics.enemiesKilled,shotsFired:et.statistics.shotsFired,lifesLost:et.statistics.lifesLost};new Pe("social-share-container",r).render()}},{key:"showError",value:function(e){document.getElementById("error").style.visibility="visible",document.getElementById("error-message").innerText=e}}])}();function Ot(){et={status:"playing",speed:0,paused:!1,baseSpeed:35e-5,targetBaseSpeed:35e-5,speedLastUpdate:0,distance:0,coins:0,fpv:!1,spawnedSimpleGun:!1,spawnedDoubleGun:!1,spawnedBetterGun:!1,lastLifeSpawn:0,lifes:Qe.maxLifes,level:1,levelLastUpdate:0,planeFallSpeed:.001,planeSpeed:0,planeCollisionDisplacementX:0,planeCollisionSpeedX:0,planeCollisionDisplacementY:0,planeCollisionSpeedY:0,coinLastSpawn:0,enemyLastSpawn:0,statistics:{coinsCollected:0,coinsSpawned:0,enemiesKilled:0,enemiesSpawned:0,shotsFired:0,lifesLost:0}},Ct.updateDistanceDisplay(),Ct.updateLevelCount(),Ct.updateLifesDisplay(),Ct.updateCoinsCount(),it.clear(),gt.updateColor(),Et.updateColor(),Ht(),bt.equipWeapon(null)}var Gt=!1;window.addEventListener("load",(function(e){P.load("ocean",null,"/audio/ocean.mp3"),P.load("propeller",null,"/audio/propeller.mp3"),P.load("coin-1","coin","/audio/coin-1.mp3"),P.load("coin-2","coin","/audio/coin-2.mp3"),P.load("coin-3","coin","/audio/coin-3.mp3"),P.load("jar-1","coin","/audio/jar-1.mp3"),P.load("jar-2","coin","/audio/jar-2.mp3"),P.load("jar-3","coin","/audio/jar-3.mp3"),P.load("jar-4","coin","/audio/jar-4.mp3"),P.load("jar-5","coin","/audio/jar-5.mp3"),P.load("jar-6","coin","/audio/jar-6.mp3"),P.load("jar-7","coin","/audio/jar-7.mp3"),P.load("airplane-crash-1","airplane-crash","/audio/airplane-crash-1.mp3"),P.load("airplane-crash-2","airplane-crash","/audio/airplane-crash-2.mp3"),P.load("airplane-crash-3","airplane-crash","/audio/airplane-crash-3.mp3"),P.load("bubble","bubble","/audio/bubble.mp3"),P.load("shot-soft","shot-soft","/audio/shot-soft.mp3"),P.load("shot-hard","shot-hard","/audio/shot-hard.mp3"),P.load("bullet-impact","bullet-impact","/audio/bullet-impact-rock.mp3"),P.load("water-splash","water-splash","/audio/water-splash.mp3"),P.load("rock-shatter-1","rock-shatter","/audio/rock-shatter-1.mp3"),P.load("rock-shatter-2","rock-shatter","/audio/rock-shatter-2.mp3"),G.load("heart"),Ct=new jt((function(){ge.initSelectionScreen()}),Ke),document.addEventListener("selectionComplete",(function(e){var t=e.detail;t.pilot,t.aircraft,Gt||(P.play("propeller",{loop:!0,volume:1}),P.play("ocean",{loop:!0,volume:1}),Gt=!0),ct(),Qe={initSpeed:35e-5,incrementSpeedByTime:25e-7,incrementSpeedByLevel:5e-6,distanceForSpeedUpdate:100,ratioSpeedDistance:50,simpleGunLevelDrop:1.1,doubleGunLevelDrop:2.3,betterGunLevelDrop:3.5,maxLifes:3,pauseLifeSpawn:400,levelCount:6,distanceForLevelUpdate:500,planeDefaultHeight:100,planeAmpHeight:80,planeAmpWidth:75,planeMoveSensivity:.005,planeRotXSensivity:8e-4,planeRotZSensivity:4e-4,planeMinSpeed:1.2,planeMaxSpeed:1.6,seaRadius:600,seaLength:800,wavesMinAmp:5,wavesMaxAmp:20,wavesMinSpeed:.001,wavesMaxSpeed:.003,cameraSensivity:.002,coinDistanceTolerance:15,coinsSpeed:.5,distanceForCoinsSpawn:50,collectibleDistanceTolerance:15,collectiblesSpeed:.6,enemyDistanceTolerance:10,enemiesSpeed:.6,distanceForEnemiesSpawn:50},ct(),(gt=new vt).mesh.position.y=-Qe.seaRadius,tt.add(gt.mesh),(Et=new vt).mesh.position.y=-Qe.seaRadius,tt.add(Et.mesh),(Ve=new yt).mesh.position.y=-Qe.seaRadius,tt.add(Ve.mesh),function(){var e=new THREE.HemisphereLight(11184810,0,.9);ot=new THREE.AmbientLight(14452852,.5);var t=new THREE.DirectionalLight(16777215,.9);t.position.set(150,350,350),t.castShadow=!0,t.shadow.camera.left=-400,t.shadow.camera.right=400,t.shadow.camera.top=400,t.shadow.camera.bottom=-400,t.shadow.camera.near=1,t.shadow.camera.far=1e3,t.shadow.mapSize.width=4096,t.shadow.mapSize.height=4096,tt.add(e),tt.add(t),tt.add(ot)}(),Rt(),Ot(),Ke&&Ke.startCapture(),kt(),Ct.informNextLevel(1),et.paused=!1})),M.catch((function(e){Ct.showError(e.message)}))}),!1);const Bt=et={speed:.01,canDie:!0}})();
//# sourceMappingURL=bundle.js.map